<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaPipe Math Demo</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .demo-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .demo-box {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #444;
        }
        h2 {
            color: #667eea;
            margin-top: 0;
        }
        .math-formula {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 3px solid #667eea;
        }
        .example {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 0.9em;
        }
        .landmark {
            display: inline-block;
            padding: 5px 10px;
            background: #667eea;
            border-radius: 3px;
            margin: 5px;
        }
        canvas {
            border: 2px solid #667eea;
            border-radius: 5px;
            background: #000;
        }
        .calculation {
            color: #4facfe;
        }
        .result {
            color: #00f2fe;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üéØ MediaPipe Pose - Math Explanation</h1>

    <div class="demo-container">
        <div class="demo-box">
            <h2>1. Input: Image</h2>
            <div class="example">
                <strong>Image Size:</strong> 640 √ó 480 pixels<br>
                <strong>Person Location:</strong> Center of image
            </div>
        </div>

        <div class="demo-box">
            <h2>2. Neural Network Processing</h2>
            <div class="math-formula">
                <strong>Feature Extraction:</strong><br>
                Feature = Convolution(Image, Kernel) + Bias
            </div>
            <div class="math-formula">
                <strong>Keypoint Prediction:</strong><br>
                (x, y, z, visibility) = CNN(Image)
            </div>
        </div>
    </div>

    <div class="demo-container">
        <div class="demo-box">
            <h2>3. Output: Normalized Coordinates</h2>
            <div class="example">
                <div class="landmark">Nose (0)</div>
                <div class="calculation">
                    x = 0.5, y = 0.2, z = 0.0<br>
                    visibility = 0.95
                </div>
                
                <div class="landmark">Left Shoulder (11)</div>
                <div class="calculation">
                    x = 0.45, y = 0.4, z = -0.1<br>
                    visibility = 0.92
                </div>
                
                <div class="landmark">Right Shoulder (12)</div>
                <div class="calculation">
                    x = 0.55, y = 0.4, z = -0.1<br>
                    visibility = 0.92
                </div>
            </div>
        </div>

        <div class="demo-box">
            <h2>4. Convert to Pixel Coordinates</h2>
            <div class="math-formula">
                <strong>Formula:</strong><br>
                pixelX = normalizedX √ó canvasWidth<br>
                pixelY = normalizedY √ó canvasHeight
            </div>
            <div class="example">
                <strong>Nose Example:</strong><br>
                <span class="calculation">
                    pixelX = 0.5 √ó 640 = <span class="result">320 pixels</span><br>
                    pixelY = 0.2 √ó 480 = <span class="result">96 pixels</span>
                </span>
            </div>
            <div class="example">
                <strong>Left Shoulder Example:</strong><br>
                <span class="calculation">
                    pixelX = 0.45 √ó 640 = <span class="result">288 pixels</span><br>
                    pixelY = 0.4 √ó 480 = <span class="result">192 pixels</span>
                </span>
            </div>
        </div>
    </div>

    <div class="demo-container">
        <div class="demo-box">
            <h2>5. Distance Calculation (For Comparison)</h2>
            <div class="math-formula">
                <strong>Euclidean Distance:</strong><br>
                distance = ‚àö[(x‚ÇÇ - x‚ÇÅ)¬≤ + (y‚ÇÇ - y‚ÇÅ)¬≤]
            </div>
            <div class="example">
                <strong>Example: Comparing Shoulders</strong><br>
                User: (0.45, 0.4)<br>
                Reference: (0.50, 0.42)<br><br>
                <span class="calculation">
                    dx = 0.50 - 0.45 = 0.05<br>
                    dy = 0.42 - 0.40 = 0.02<br>
                    distance = ‚àö(0.05¬≤ + 0.02¬≤)<br>
                    distance = ‚àö(0.0025 + 0.0004)<br>
                    distance = ‚àö0.0029 = <span class="result">0.054</span>
                </span>
            </div>
        </div>

        <div class="demo-box">
            <h2>6. Similarity Score</h2>
            <div class="math-formula">
                <strong>Similarity Formula:</strong><br>
                similarity = 1 - (distance / threshold)
            </div>
            <div class="example">
                <strong>Example:</strong><br>
                distance = 0.054<br>
                threshold = 0.2<br><br>
                <span class="calculation">
                    similarity = 1 - (0.054 / 0.2)<br>
                    similarity = 1 - 0.27<br>
                    similarity = <span class="result">0.73</span> (73% match)
                </span>
            </div>
        </div>
    </div>

    <div class="demo-container">
        <div class="demo-box">
            <h2>7. Movement Detection</h2>
            <div class="math-formula">
                <strong>Frame-to-Frame Movement:</strong><br>
                movement = ‚àö[(x‚ÇÇ - x‚ÇÅ)¬≤ + (y‚ÇÇ - y‚ÇÅ)¬≤]
            </div>
            <div class="example">
                <strong>Example: Shoulder Movement</strong><br>
                Frame 1: (0.45, 0.40)<br>
                Frame 2: (0.48, 0.38)<br><br>
                <span class="calculation">
                    dx = 0.48 - 0.45 = 0.03<br>
                    dy = 0.38 - 0.40 = -0.02<br>
                    movement = ‚àö(0.03¬≤ + (-0.02)¬≤)<br>
                    movement = ‚àö(0.0009 + 0.0004)<br>
                    movement = ‚àö0.0013 = <span class="result">0.036</span>
                </span><br><br>
                <span class="result">Threshold: 0.02</span><br>
                <span class="result">0.036 > 0.02 ‚Üí Person is moving! ‚úÖ</span>
            </div>
        </div>

        <div class="demo-box">
            <h2>8. Points Calculation</h2>
            <div class="math-formula">
                <strong>Points Formula:</strong><br>
                points = floor(similarity √ó basePoints)
            </div>
            <div class="example">
                <strong>Example:</strong><br>
                similarity = 0.73<br>
                basePoints = 10<br><br>
                <span class="calculation">
                    points = floor(0.73 √ó 10)<br>
                    points = floor(7.3)<br>
                    points = <span class="result">7 points</span>
                </span>
            </div>
        </div>
    </div>

    <div style="background: #2a2a2a; padding: 20px; border-radius: 10px; margin: 20px 0;">
        <h2>üìä Complete Example Flow</h2>
        <div class="example">
            <strong>Step 1:</strong> User dances in front of camera<br>
            <strong>Step 2:</strong> MediaPipe detects pose ‚Üí outputs 33 landmarks with normalized coordinates<br>
            <strong>Step 3:</strong> We compare user landmarks to reference landmarks<br>
            <strong>Step 4:</strong> Calculate distance for each key point<br>
            <strong>Step 5:</strong> Average distances ‚Üí similarity score (0-1)<br>
            <strong>Step 6:</strong> Convert similarity to points (0-10 per frame)<br>
            <strong>Step 7:</strong> Add points to total score<br>
            <strong>Step 8:</strong> Repeat 60 times per second!
        </div>
    </div>

    <div style="background: #2a2a2a; padding: 20px; border-radius: 10px; margin: 20px 0;">
        <h2>üîë Key Insights</h2>
        <ul style="line-height: 2;">
            <li><strong>Normalized coordinates (0-1)</strong> make it resolution-independent</li>
            <li><strong>Visibility scores</strong> tell us if a body part is actually visible</li>
            <li><strong>Z-depth</strong> gives relative distance (negative = closer)</li>
            <li><strong>Euclidean distance</strong> measures how far apart poses are</li>
            <li><strong>Movement threshold</strong> filters out static/no-movement frames</li>
        </ul>
    </div>
</body>
</html>

